<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Dumb Draw ‚Äî Shape Rush</title>
<style>
  :root{
    --bg1:#f0f9ff; --bg2:#fffef6;
    --card:#ffffff; --ink:#0f172a; --muted:#55718d;
    --accent:#0ea5e9; --good:#16a34a; --warn:#f59e0b; --bad:#ef4444;
    --border:#dbeafe;
  }
  html,body{margin:0;height:100%;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:560px;margin:0 auto;padding:14px 14px 28px}

  h1{font-size:22px;margin:10px 0 8px;text-align:center}
  .hud{display:flex;justify-content:space-between;align-items:center;gap:10px;background:var(--card);border:2px solid var(--border);border-radius:16px;padding:10px 12px;box-shadow:0 6px 18px rgba(14,165,233,.15)}
  .hud small{color:var(--muted);display:block}
  .score{font-weight:800}
  .row{display:flex;gap:16px}
  .row > div{min-width:0}

  .preview{position:relative;width:76px;height:76px;border-radius:12px;background:#f1f5f9;border:2px solid var(--border);display:grid;place-items:center}
  .preview canvas{width:64px;height:64px}

  .board{margin-top:12px;background:var(--card);border:2px solid var(--border);border-radius:20px;overflow:hidden;box-shadow:0 8px 24px rgba(14,165,233,.12)}
  #draw{width:100%;touch-action:none;display:block;background:radial-gradient(1000px 420px at 50% -120px,#e0f2fe 0%,#ffffff 70%)}

  .btns{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  button{flex:1;background:#fff;color:var(--ink);border:2px solid var(--border);border-radius:12px;padding:12px 10px;font-weight:700}
  button:active{transform:translateY(1px)}
  .accent{border-color:var(--accent);box-shadow:0 0 0 3px rgba(14,165,233,.15)}
  .success{border-color:var(--good)}
  .wa{border-color:#25D366}

  .toast{text-align:center;margin-top:8px;color:var(--muted);min-height:18px}

  /* Overlays */
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,#ffffffcc,#fff8eacc);backdrop-filter:blur(2px);z-index:20;padding:20px}
  .overlay.show{display:flex}
  .panel{max-width:560px;width:92%;background:var(--card);border:2px solid var(--border);border-radius:18px;padding:20px 18px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.12)}
  .title{font-size:26px;font-weight:900;margin:4px 0 10px}
  .worm{font-size:42px}
  .subtitle{color:var(--muted);margin-bottom:10px}
  .inst{background:#f8fafc;border:2px dashed var(--border);border-radius:12px;padding:10px 12px;text-align:left;margin:10px 0}
  .inst li{margin:6px 0}
  .panel .btns{margin-top:10px}
  .panel .scoreline{font-size:28px;font-weight:900;margin-top:6px}
  .panel .rank{font-size:18px;font-weight:800;margin-top:4px}

  .timer{font-weight:800}
  .timebar{height:6px;background:#e2e8f0;border-radius:999px;overflow:hidden;margin-top:6px}
  .timefill{height:100%;width:100%;background:linear-gradient(90deg,#22c55e,#fde047,#f97316,#ef4444);transition:width .1s linear}
</style>
</head>
<body>
  <!-- START OVERLAY -->
  <div id="startOverlay" class="overlay show">
    <div class="panel">
      <div class="worm">ü™±</div>
      <div class="title">Dumb Draw ‚Äî Shape Rush</div>
      <div class="subtitle">Happy doodles. Silly shapes. Beat your best!</div>
      <ul class="inst">
        <li>Draw the tiny <b>preview shape</b> in the top-right.</li>
        <li>You have <b>10 seconds</b> per shape. 5 shapes per game.</li>
        <li>Lift your finger/pen to submit your drawing.</li>
        <li>Score = similarity. Close the loop for bonus points.</li>
      </ul>
      <div class="btns">
        <button id="playBtn" class="accent">‚ñ∂Ô∏è Play</button>
      </div>
      <div style="margin-top:8px;color:var(--muted)">Best score so far: <b id="bestAtStart">0</b></div>
    </div>
  </div>

  <!-- GAME OVER OVERLAY -->
  <div id="overOverlay" class="overlay">
    <div class="panel">
      <div class="worm">ü™±</div>
      <div class="title">GAME OVER!</div>
      <div class="scoreline" id="finalScoreBig">Total: 0</div>
      <div class="rank" id="finalRankBig">Rank: Worm Doodler ü™±</div>
      <div style="margin-top:6px;color:var(--muted)">Best: <b id="bestScoreBig">0</b></div>
      <div class="btns">
        <button id="overShareBtn" class="wa">Share on WhatsApp</button>
        <button id="overRestartBtn" class="accent">üîÅ Restart</button>
      </div>
    </div>
  </div>

  <div class="wrap">
    <h1>üåü Dumb Draw ‚Äî Shape Rush</h1>

    <div class="hud">
      <div class="row" style="flex:1">
        <div>
          <small>Round</small>
          <span id="round">‚Äì / 5</span>
        </div>
        <div>
          <small>Time</small>
          <span id="timeLeft" class="timer">10.0s</span>
          <div class="timebar"><div id="timeFill" class="timefill" style="width:100%"></div></div>
        </div>
      </div>
      <div class="row">
        <div class="score">
          <small>Last</small>
          <span id="lastScore">‚Äì</span>
        </div>
        <div>
          <small>Total</small>
          <span id="totalScore">0</span>
        </div>
        <div>
          <small>Best</small>
          <span id="bestScore">0</span>
        </div>
      </div>
      <div>
        <div><small>Shape</small><span id="shapeName">‚Äî</span></div>
      </div>
      <div class="preview"><canvas id="preview"></canvas></div>
    </div>

    <div class="board">
      <canvas id="draw"></canvas>
    </div>

    <div class="btns">
      <button id="clearBtn">Clear</button>
      <button id="skipBtn">Skip</button>
      <button id="restartBtn">Restart</button>
      <button id="shareBtn" class="wa" disabled>Share on WhatsApp</button>
    </div>
    <div class="toast" id="toast">Press <b>Play</b> to start. Draw the shape and lift to submit.</div>
  </div>

<script>
(function(){
  "use strict";

  // ===== DOM refs =====
  var canvas = document.getElementById('draw');
  var ctx = canvas.getContext('2d');
  var prevCanvas = document.getElementById('preview');
  var pctx = prevCanvas.getContext('2d');

  var roundEl = document.getElementById('round');
  var timeLeftEl = document.getElementById('timeLeft');
  var timeFillEl = document.getElementById('timeFill');
  var lastScoreEl = document.getElementById('lastScore');
  var totalScoreEl = document.getElementById('totalScore');
  var bestScoreEl  = document.getElementById('bestScore');
  var shapeNameEl = document.getElementById('shapeName');
  var toast = document.getElementById('toast');

  var startOverlay = document.getElementById('startOverlay');
  var playBtn = document.getElementById('playBtn');
  var bestAtStart = document.getElementById('bestAtStart');

  var overOverlay = document.getElementById('overOverlay');
  var finalScoreBig = document.getElementById('finalScoreBig');
  var finalRankBig = document.getElementById('finalRankBig');
  var bestScoreBig = document.getElementById('bestScoreBig');
  var overShareBtn = document.getElementById('overShareBtn');
  var overRestartBtn = document.getElementById('overRestartBtn');

  var clearBtn = document.getElementById('clearBtn');
  var skipBtn = document.getElementById('skipBtn');
  var restartBtn = document.getElementById('restartBtn');
  var shareBtn = document.getElementById('shareBtn');

  // ===== State =====
  var boardBox = {minX:0,minY:0,maxX:0,maxY:0,w:0,h:0};
  var ROUNDS = 5;
  var ROUND_TIME_MS = 10000;
  var order = [];
  var idx = 0;
  var total = 0;
  var best = Number(localStorage.getItem('dd_best')||0);
  var drawing=false, stroke=[];
  var state = 'start'; // 'start' | 'playing' | 'gameover'
  var timerId = null, deadline = 0, roundActive=false;

  bestScoreEl.textContent = String(best);
  bestAtStart.textContent = String(best);

  // ===== Utils =====
  function lerp(a,b,t){ return a + (b-a)*t; }
  function dist(a,b){ var dx=a.x-b.x, dy=a.y-b.y; return Math.sqrt(dx*dx + dy*dy); }
  function clamp(v,lo,hi){ return Math.max(lo, Math.min(hi, v)); }
  function polylineLength(pts){ var s=0; for(var i=1;i<pts.length;i++) s+=dist(pts[i-1], pts[i]); return s; }
  function resample(pts, n){
    if(!n) n=200;
    if(pts.length<2) return pts.slice();
    var L=polylineLength(pts); if(!L) return pts.slice();
    var step=L/(n-1), d=0, i=1, out=[pts[0]];
    while(out.length<n && i<pts.length){
      var a=pts[i-1], b=pts[i];
      var seg=dist(a,b);
      if((d+seg)>=step){
        var t=(step-d)/seg;
        var np={x: lerp(a.x,b.x,t), y: lerp(a.y,b.y,t)};
        out.push(np);
        pts.splice(i,0,np);
        d=0; i++;
      } else { d+=seg; i++; }
    }
    if(out.length<n) out.push(pts[pts.length-1]);
    return out;
  }
  function bbox(pts){
    var minX=1e9,minY=1e9,maxX=-1e9,maxY=-1e9;
    for(var i=0;i<pts.length;i++){
      var p=pts[i];
      if(p.x<minX)minX=p.x; if(p.y<minY)minY=p.y;
      if(p.x>maxX)maxX=p.x; if(p.y>maxY)maxY=p.y;
    }
    return {minX:minX, minY:minY, maxX:maxX, maxY:maxY, w:maxX-minX, h:maxY-minY};
  }
  function normalizeToBox(pts, targetBox, pad){
    if(!pad) pad=0;
    if(!pts.length) return [];
    var b=bbox(pts);
    var sx=(targetBox.w-2*pad)/(b.w||1);
    var sy=(targetBox.h-2*pad)/(b.h||1);
    var s=Math.min(sx,sy);
    var cx=(targetBox.minX+targetBox.maxX)/2;
    var cy=(targetBox.minY+targetBox.maxY)/2;
    var bx=(b.minX+b.maxX)/2, by=(b.minY+b.maxY)/2;
    var out=new Array(pts.length);
    for(var i=0;i<pts.length;i++){
      var p=pts[i];
      out[i]={ x:(p.x-bx)*s + cx, y:(p.y-by)*s + cy };
    }
    return out;
  }
  function nearestAvgDistance(A,B){
    if(!A.length||!B.length) return 1e9;
    var sum=0;
    for(var i=0;i<A.length;i++){
      var a=A[i], best=1e9;
      for(var j=0;j<B.length;j+=3){
        var dx=a.x-B[j].x, dy=a.y-B[j].y;
        var d=dx*dx+dy*dy;
        if(d<best) best=d;
      }
      sum += Math.sqrt(best);
    }
    return sum/A.length;
  }

  // ===== Shapes =====
  function shapeCircle(t){ var a=2*Math.PI*t; return {x:0.5+0.42*Math.cos(a), y:0.5+0.42*Math.sin(a)}; }
  function shapeSquare(t){
    var p=t*4;
    if (p<1) return {x: lerp(0.08,0.92,p), y:0.08};
    if (p<2) return {x:0.92, y: lerp(0.08,0.92,p-1)};
    if (p<3) return {x: lerp(0.92,0.08,p-2), y:0.92};
    return {x:0.08, y: lerp(0.92,0.08,p-3)};
  }
  function shapeTriangle(t){
    var A={x:0.5,y:0.08}, B={x:0.92,y:0.9}, C={x:0.08,y:0.9};
    var perAB=0.34, perBC=0.33, u;
    if (t<perAB){ u=t/perAB; return {x: lerp(A.x,B.x,u), y: lerp(A.y,B.y,u)}; }
    if (t<perAB+perBC){ u=(t-perAB)/perBC; return {x: lerp(B.x,C.x,u), y: lerp(B.y,C.y,u)}; }
    u=(t-perAB-perBC)/(1-perAB-perBC); return {x: lerp(C.x,A.x,u), y: lerp(C.y,A.y,u)};
  }
  function shapeStar(t){
    var R=0.42, r=R*0.4, cx=0.5, cy=0.5;
    var i=Math.floor(t*10), frac=(t*10 - i);
    var a0=(i)*Math.PI/5 - Math.PI/2, a1=(i+1)*Math.PI/5 - Math.PI/2;
    var rad0=(i%2===0? R: r), rad1=((i+1)%2===0? R: r);
    return { x: cx + (rad0*Math.cos(a0) + (rad1*Math.cos(a1)-rad0*Math.cos(a0))*frac),
             y: cy + (rad0*Math.sin(a0) + (rad1*Math.sin(a1)-rad0*Math.sin(a0))*frac) };
  }
  function shapeHeart(t){
    var a=2*Math.PI*t;
    var x=0.5 + 0.36*Math.pow(Math.sin(a),3);
    var y=0.5 - 0.26*( 13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a) )/13;
    return {x:x,y:y};
  }
  var SHAPES = [
    {name:"Circle", gen:shapeCircle},
    {name:"Square", gen:shapeSquare},
    {name:"Triangle", gen:shapeTriangle},
    {name:"Star", gen:shapeStar},
    {name:"Heart", gen:shapeHeart}
  ];

  // ===== HiDPI sizing =====
  function fitHiDPICanvas(c, ctx) {
    var dpr = window.devicePixelRatio || 1;
    var cssW = Math.max(1, Math.floor(c.clientWidth));
    var cssH = Math.max(1, Math.floor(c.clientHeight));
    c.width  = Math.round(cssW * dpr);
    c.height = Math.round(cssH * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // draw in CSS pixels
    ctx.imageSmoothingEnabled = true;
    return { cssW:cssW, cssH:cssH, dpr:dpr };
  }
  function resizeAll() {
    var board = document.querySelector('.board');
    var cssSize = Math.floor(board.clientWidth);
    canvas.style.width = cssSize + 'px';
    canvas.style.height = cssSize + 'px';

    var prevSize = 64;
    prevCanvas.style.width = prevSize + 'px';
    prevCanvas.style.height = prevSize + 'px';

    fitHiDPICanvas(canvas, ctx);
    fitHiDPICanvas(prevCanvas, pctx);

    var PAD = 24;
    boardBox.minX = PAD;
    boardBox.minY = PAD;
    boardBox.maxX = canvas.clientWidth - PAD;
    boardBox.maxY = canvas.clientHeight - PAD;
    boardBox.w = boardBox.maxX - boardBox.minX;
    boardBox.h = boardBox.maxY - boardBox.minY;

    if (state==='playing' && order.length) {
      clearCanvas();
      renderTargetPreview();
    }
  }
  window.addEventListener('resize', resizeAll);
  window.addEventListener('orientationchange', resizeAll);

  // ===== Drawing / input =====
  function getPos(e){
    var rect = canvas.getBoundingClientRect();
    var x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    var y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    return { x:x, y:y };
  }
  function startDraw(e){
    if(state!=='playing' || !roundActive) return;
    if(e) e.preventDefault();
    drawing=true; stroke=[];
    var p=getPos(e); stroke.push(p);
  }
  function moveDraw(e){
    if(state!=='playing' || !roundActive || !drawing) return;
    var p=getPos(e); stroke.push(p);
    var a=stroke[stroke.length-2], b=stroke[stroke.length-1];
    ctx.strokeStyle='#0f172a';
    ctx.lineWidth=3;
    ctx.lineCap='round';
    ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
  }
  function endDraw(){
    if(state!=='playing' || !roundActive || !drawing) return;
    drawing=false;
    submitStroke(); // will stop timer inside
  }

  canvas.addEventListener('mousedown', startDraw);
  canvas.addEventListener('mousemove', moveDraw);
  window.addEventListener('mouseup', endDraw);
  canvas.addEventListener('touchstart', startDraw, {passive:false});
  canvas.addEventListener('touchmove', moveDraw, {passive:false});
  canvas.addEventListener('touchend', endDraw);

  // ===== Rendering =====
  function sampleShape(gen, n, box){
    var pts=new Array(n);
    for(var i=0;i<n;i++){
      var t=i/(n-1);
      var p=gen(t);
      pts[i]={ x: lerp(box.minX, box.maxX, p.x), y: lerp(box.minY, box.maxY, p.y) };
    }
    return pts;
  }
  function renderHUD(){
    roundEl.textContent=(idx+1)+" / "+ROUNDS;
    shapeNameEl.textContent = order[idx].name;
  }
  function clearCanvas(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawGuide();
  }
  function drawGuide(){
    if (!order.length || !order[idx]) return;
    ctx.save();
    ctx.lineWidth=1.5;
    ctx.strokeStyle='#bae6fd';
    ctx.strokeRect(boardBox.minX,boardBox.minY,boardBox.w,boardBox.h);

    var pts = sampleShape(order[idx].gen, 240, boardBox);
    ctx.beginPath();
    for(var i=0;i<pts.length;i++){
      var p=pts[i];
      if(i===0) ctx.moveTo(p.x,p.y); else ctx.lineTo(p.x,p.y);
    }
    ctx.closePath();
    ctx.globalAlpha=0.2;
    ctx.strokeStyle= '#60a5fa';
    ctx.stroke();
    ctx.restore();
  }
  function renderTargetPreview(){
    var cssW = Math.max(1, Math.floor(prevCanvas.clientWidth));
    var cssH = Math.max(1, Math.floor(prevCanvas.clientHeight));
    pctx.clearRect(0, 0, cssW, cssH);
    if (!order.length) return;
    var bb = { minX:4, minY:4, maxX:cssW-4, maxY:cssH-4 };
    bb.w = bb.maxX - bb.minX; bb.h = bb.maxY - bb.minY;
    var pts = sampleShape(order[idx].gen, 140, bb);
    pctx.beginPath();
    for (var i=0;i<pts.length;i++){
      var p = pts[i];
      if (i===0) pctx.moveTo(p.x, p.y);
      else pctx.lineTo(p.x, p.y);
    }
    pctx.closePath();
    pctx.lineWidth = 2;
    pctx.strokeStyle = '#0ea5e9';
    pctx.stroke();
  }

  // ===== Scoring =====
  function scoreAgainst(targetPts, userPtsRaw){
    if (userPtsRaw.length<8) return 0;
    var userRes = resample(userPtsRaw.slice(), 220);
    var user = normalizeToBox(userRes, boardBox, 6);
    var avgD = nearestAvgDistance(targetPts, user);
    var tol = Math.min(boardBox.w, boardBox.h) * 0.02;
    var coverage = Math.exp(-avgD / tol);
    var tLen = polylineLength(targetPts);
    var uLen = polylineLength(user);
    var lenErr = Math.abs(uLen - tLen) / (tLen||1);
    var lenFactor = Math.exp(-1.2*lenErr);
    var closeGap = dist(user[0], user[user.length-1]) / (tLen||1);
    var closeFactor = Math.exp(-6*closeGap);
    var raw = 100 * (0.65*coverage + 0.20*lenFactor + 0.15*closeFactor);
    var s = Math.round(clamp(raw, 0, 100));
    return s;
  }

  // ===== Timer =====
  function startTimer(){
    stopTimer();
    deadline = performance.now() + ROUND_TIME_MS;
    roundActive = true;
    tick(); // immediate paint
    timerId = setInterval(tick, 100);
  }
  function stopTimer(){
    if(timerId){ clearInterval(timerId); timerId=null; }
  }
  function tick(){
    var now = performance.now();
    var rem = Math.max(0, deadline - now);
    var seconds = (rem/1000).toFixed(1);
    timeLeftEl.textContent = seconds + 's';
    var pct = Math.max(0, Math.min(1, rem/ROUND_TIME_MS));
    timeFillEl.style.width = (pct*100)+'%';
    if (rem<=0) timeUp();
  }
  function timeUp(){
    if(!roundActive) return;
    roundActive=false;
    stopTimer();
    // score zero on timeout
    var s = 0;
    total += s;
    lastScoreEl.textContent = String(s);
    totalScoreEl.textContent = String(total);
    toast.textContent = '‚è≥ Time up! 0 points.';
    advance();
  }

  // ===== Game flow =====
  function pickOrder(){
    var pool = SHAPES.concat(SHAPES);
    order = [];
    for(var i=0;i<ROUNDS;i++){
      order.push( pool[Math.floor(Math.random()*pool.length)] );
    }
    idx=0; total=0;
    lastScoreEl.textContent='‚Äì';
    totalScoreEl.textContent='0';
    renderHUD();
    renderTargetPreview();
  }

  function startRound(){
    renderHUD();
    clearCanvas();
    renderTargetPreview();
    toast.textContent = 'Draw the shape and lift to submit.';
    startTimer();
  }

  function submitStroke(){
    if(!roundActive) return;
    roundActive=false;
    stopTimer();
    var target = sampleShape(order[idx].gen, 240, boardBox);
    var s = scoreAgainst(target, stroke);
    total += s;
    lastScoreEl.textContent = String(s);
    totalScoreEl.textContent = String(total);
    var c = (s>=85? '#16a34a' : (s>=60? '#f59e0b' : '#ef4444'));
    toast.innerHTML = 'Shape scored <b style="color:'+c+'">'+s+'</b>/100';
    advance();
  }

  function advance(){
    idx++;
    if (idx>=ROUNDS){ finishGame(); }
    else { startRound(); }
  }

  function finishGame(){
    state='gameover';
    stopTimer();
    roundActive=false;
    // Save best
    if (total>best){ best=total; localStorage.setItem('dd_best', String(best)); }
    bestScoreEl.textContent = String(best);
    bestScoreBig.textContent = String(best);

    var rank = (total>=430)? 'Circle Master üéØ' :
               (total>=360)? 'Egg Drawer ü•ö' :
               (total>=280)? 'Potato Artist ü•î' :
               (total>=200)? 'Oval Enjoyer ü•ö‚û°Ô∏è‚≠ï' : 'Worm Doodler ü™±';

    finalScoreBig.textContent = 'Total: ' + total;
    finalRankBig.textContent  = 'Rank: ' + rank;

    // enable share buttons
    shareBtn.disabled = false;
    shareBtn.onclick = function(){ shareScore(total, rank); };
    overShareBtn.onclick = function(){ shareScore(total, rank); };

    // show overlay
    overOverlay.classList.add('show');
    toast.textContent = 'Game over! Nice doodles.';
  }

  function startGame(){
    state='playing';
    shareBtn.disabled = true;
    overOverlay.classList.remove('show');
    startOverlay.classList.remove('show');
    pickOrder();
    startRound();
  }

  function restartGame(){
    // From overlay or bottom button
    startGame();
  }

  // ===== Share =====
  function shareScore(total, rankText){
    var url = location.href;
    var msg = "I scored " + total + "/500 in Dumb Draw ‚Äî Shape Rush! " +
              "Rank: " + rankText + "  Play: " + url;
    if (navigator.share) {
      navigator.share({ text: msg, url: url }).catch(function(){});
    } else {
      var wa = "https://wa.me/?text=" + encodeURIComponent(msg);
      window.open(wa, "_blank");
    }
  }

  // ===== Buttons =====
  clearBtn.onclick = function(){
    if(state!=='playing') return;
    stroke=[]; clearCanvas(); toast.textContent='Cleared. Draw again.';
  };
  skipBtn.onclick = function(){
    if(state!=='playing' || !roundActive) return;
    roundActive=false; stopTimer();
    lastScoreEl.textContent='0';
    toast.textContent='Skipped. Next shape.';
    advance();
  };
  restartBtn.onclick = function(){ restartGame(); };
  overRestartBtn.onclick = function(){ restartGame(); };
  playBtn.onclick = function(){ startGame(); };

  // ===== Boot after DOM ready =====
  function fitOnce(){
    // Size canvases & show best score on start
    resizeAll();
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', fitOnce);
  } else {
    fitOnce();
  }
})();
</script>
</body>
</html>
